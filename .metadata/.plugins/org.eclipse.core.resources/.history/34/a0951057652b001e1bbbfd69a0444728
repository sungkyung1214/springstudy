<%@page import="ex10_db.VO"%>
<%@page import="java.util.List"%>
<%@page import="ex10_db.DAO"%>
<%@page import="org.springframework.web.context.support.WebApplicationContextUtils"%>
<%@page import="org.springframework.web.context.WebApplicationContext"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
	<%
		WebApplicationContext context = 
		WebApplicationContextUtils.getWebApplicationContext(application);
	
		DAO dao = (DAO)context.getBean("guestdao");
		List<VO> list = dao.getList();
		pageContext.setAttribute("list", list);
	%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style type="text/css">
	table, th,td{
	border:1px solid pink;
	padding: 5px;
	}
	table{
	width: 1000px;
	text-align: center;
	}

</style>
</head>
<body>
	<h2>게스트북</h2>
	<table>
		<thead>
			<tr>
				<th>번호</th>
				<th>이름</th>
				<th>제목</th>
				<th>내용</th>
				<th>이메일</th>
				<th>비밀번호</th>
				<th>등록날짜</th>
			</tr>
		</thead>
		<tbody>
			<c:forEach var="k" items="${list}">
				<tr>
					<td>${k.idx }</td>
					<td>${k.name }</td>
					<td>${k.subject }</td>
					<td>${k.content }</td>
					<td>${k.email }</td>
					<td>${k.pwd }</td>
					<td>${k.regdate }</td>
				
				</tr>
			
			</c:forEach>
		</tbody>
	
	</table>
</body>
</html>